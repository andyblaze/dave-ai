<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dave AI Example</title>
</head>
<body>
  <h1>Dave AI Test</h1>
  <script type="text/javascript" src="dave.js"></script>
  <script type="text/javascript">
    const net = new Dave(3, 10); //create(3, 10); // x inputs, y hidden neurons
    
    class Trainer {    
        trainYes(net, yes) {
            const input = encodeNumber(yes);
            //console.log(input);
            train(net, input, 1);
        }
        trainNo(net, no) {
            const input = encodeNumber(no);
            //console.log(no, input);
            train(net, input, 0);
        }
        loop(net, count=60000) {
            const noValues = Array.from({ length: 10000 }, (_, i) => i).filter(n => n % 5 !== 0);
            for (let i = 0; i < count; i++) {
                const yes = mt_rand(0, 2000) * 5;
                this.trainYes(net, yes);
                const no = noValues[mt_rand(0, noValues.length -1)];
                this.trainNo(net, no);
            }
        }
}

trainer = new Trainer();
trainer.loop(net);
    

// test predict
let correct = 0;
for (let i = 0; i < 10000; i++) {
    const output = predict(net, i);
    if ( isNaN(output) ) {
        throw new Error("NaN from predict(): " + output);
    }
    const isYes = i % 5 === 0;
    if ((isYes && output > 0.9) || (!isYes && output < 0.1)) {
        correct++;
    }
}
console.log("Accuracy: " + (correct / 100) + "%");
    

  </script>
</body>
</html>